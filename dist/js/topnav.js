"use strict";var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(i){function e(){_classCallCheck(this,e),this.container=i(".sub-cart"),this.$aSid=null,this.$aNum=null}(new(_createClass(e,[{key:"getData",value:function(){var n=this,e=document.cookie.split("; ");Array(),Array(),i(e).each(function(){var e=this.split("=");if("sid"==i(e)[0]){var t=i(e)[1].split(",");n.$aSid=t}else if("num"==i(e)[0]){var a=i(e)[1].split(",");n.$aNum=a}}),this.useAjax()}},{key:"useAjax",value:function(){var a=this;null!==a.$aSid&&i.ajax({type:"post",url:"http://10.31.157.69/TheNorthFace/php/cart.php",data:{goods:a.$aSid},dataType:"json",success:function(e){1<=e.length?i.each(e,function(e,t){setTimeout(function(){i('                      <div class="cartItem" style="">\n                                 <div class="pic">\n                                     <img style="width:100%" src="'+i(this).eq(0).eq(0).attr("url")+'" alt="">\n                                 </div>\n                                 <div class="title">\n                                    <a href="http://10.31.157.69/TheNorthFace/dist/html/detail.html#'+a.$aSid[e]+'" target="_blank">'+i(this).eq(0).eq(0).attr("title")+'</a>\n                                 </div>\n                                 <div class ="other">\n                                     <span class="total">x'+a.$aNum[e]+'件</span><a href="javascript:;" class="remove '+a.$aSid[e]+'">移除</a>\n                                 </div>\n                             </div>').appendTo(i("#sub-cart .item")),i(".none").css("display","none")}.bind(this),100)}):i(".none").css("display","block"),a.delete()}})}},{key:"delete",value:function(){var n=this;setTimeout(function(){i("#sub-cart").on("click",function(e){if(-1!==e.target.className.indexOf("remove")){i(e.target).parent().parent().hide();var t,a=jQuery.inArray(e.target.className.substring(7),n.$aSid);console.log(a,n.$aSid),n.$aSid.splice(a,1),n.$aNum.splice(a,1),console.log(n.$aSid),(t=new Date).setDate(t.getDate()+30),0==n.$aSid.length?(i(".none").show(),(t=new Date).setDate(t.getDate()+-1),document.cookie="sid=;expires="+t,document.cookie="num=;expires="+t):(i(".none").hide(),document.cookie="sid="+n.$aSid+";expires="+t,document.cookie="num="+n.$aNum+";expires="+t)}})},100)}}]),e)).getData(),setTimeout(function(){null!==localStorage.getItem("user")?(i(".member-in span").show(),i(".member-in span").css({"margin-left":"-30px",cursor:"pointer","font-size":"12px"}),i(".member-in span").html("欢迎您 "+localStorage.getItem("user")+"用户"),i(".member-in span").on("click",function(){confirm("是否退出登录？")&&(localStorage.removeItem("user"),location.reload())}),i(".member-in a").hide()):i(".member-in span").hide()},100)}(jQuery);